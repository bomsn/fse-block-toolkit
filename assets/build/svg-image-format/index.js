(()=>{"use strict";const e=window.wp.i18n,t=window.wp.element,n=window.wp.richText,i=window.wp.blockEditor,o=window.wp.components,a=window.ReactJSXRuntime,l="fse-block-toolkit/svg-image-format",r=(0,e.__)("Inline SVG"),s={name:l,title:r,tagName:"span",className:"inline-svg",edit:function({value:l,onChange:s,isActive:c,contentRef:g}){const[p,d]=(0,t.useState)(!1),[m,u]=(0,t.useState)(""),[x,h]=(0,t.useState)(""),[v,w]=(0,t.useState)(""),[b,f]=(0,t.useState)("left");return(0,t.useEffect)((()=>{const e=(new DOMParser).parseFromString(m,"image/svg+xml").querySelector("svg");if(e){const t=parseInt(e.getAttribute("width"))||"20",n=parseInt(e.getAttribute("height"))||"20";h(t),w(n)}}),[m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.RichTextToolbarButton,{icon:"embed-generic",title:r,onClick:()=>d((e=>!e)),isActive:c}),p&&(0,a.jsx)(o.Popover,{onClose:()=>d(!1),anchor:g.current,placement:"bottom",offset:8,className:"inline-svg-popover",children:(0,a.jsxs)("div",{style:{padding:"16px",minWidth:"300px"},children:[(0,a.jsx)(o.TextareaControl,{label:(0,e.__)("SVG Code"),value:m,onChange:u,rows:10}),(0,a.jsx)(o.TextControl,{label:(0,e.__)("Width"),value:x,onChange:h}),(0,a.jsx)(o.TextControl,{label:(0,e.__)("Height"),value:v,onChange:w}),(0,a.jsx)(o.SelectControl,{label:(0,e.__)("Position"),value:b,options:[{label:(0,e.__)("Left of text"),value:"left"},{label:(0,e.__)("Right of text"),value:"right"}],onChange:f}),(0,a.jsx)(o.Button,{variant:"primary",onClick:()=>{const e=(e=>{const t=document.createElement("div");t.innerHTML=e.trim();const n=t.querySelector("svg");return n?n.outerHTML:""})(m).replace(/\s+/g," ").trim(),t=`<span class="inline-svg" contenteditable="false" style="display: inline-block; background-image: url('data:image/svg+xml,${encodeURIComponent(e).replace(/'/g,"%27").replace(/"/g,"%22")}'); width: ${x}px; height: ${v}px; background-size: contain; background-repeat: no-repeat; vertical-align: middle; position: relative; top: -1px; ${"left"===b?"margin-right: 8px;":"margin-left: 8px;"}">&#8203;</span>`,i=(0,n.insert)(l,(0,n.create)({html:t}));s(i),d(!1)},style:{marginTop:"8px"},children:(0,e.__)("Insert SVG")})]})})]})}};(0,n.registerFormatType)(l,s)})();